(function(a){var b=function(a){var b=new Image;b.onload=b.onerror=function(){a(this.width+this.height==2)},b.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="};a.fn.visualPassword=function(c){var d=this;b(function(b){if(!vizhash)throw"This script requires VizHash.js. Get it: http://is.gd/IJaMRG";var e=vizhash.supportCanvas();return c=a.extend({},a.fn.visualPassword.defaultOptions,c),a.metadata&&(c=a.extend({},d.options,element.metadata())),d.each(function(d,f){var g=a(f);g.addClass(c.passwordFieldClass),g.addClass(c.passwordFieldClass+"-"+d);if(e&&b){var h=[c.canvasClass,c.canvasClass+"-"+d];g.on("keyup",function(a){var b=c.createCanvas(g,h,c);c.keyup(g,b,c)}),g.on("resize",function(a){var b=c.createCanvas(g,h,c);c.resize(g,b,c)}),g.on("change",function(a){var b=c.createCanvas(g,h,c);c.change(g,b,c)})}else option.noSupport(g,e,b,c);var i=c.createCanvas(g,h,c);c.init(g,i,c)})})},a.fn.visualPassword.defaultOptions={passwordFieldClass:"hashed-password",canvasClass:"password-hash",height:null,width:null,offset:.1,change:function(){},keyup:function(a,b,c){var d=Math.floor(a.innerHeight()),e=d*c.offset,f=b[0].toDataURL("image/png"),g="transparent url("+f+") no-repeat "+e+"px "+e+"px";a.css("background",g),a.css("padding-left",d+e)},resize:function(a,b,c){var b=createCanvas(input,[canvas.class()],c.width,option.height);c.keyup(a,b,c)},createCanvas:function(b,c,d){var e=d.getSize(b,c,d),f=vizhash.canvasHash(b.val(),e.width,e.height),g=a(f.canvas);return a.each(c,function(a,b){g.addClass(b)}),g},noSupport:function(){},init:function(a,b,c){c.keyup(a,b,c)},getSize:function(a,b,c){var d=Math.ceil(a.innerHeight()*(1-c.offset*2));return{width:c.width||d,height:c.height||d}}}})(jQuery);